#! /bin/sh
# configure -- Configure MPS distribution for building.
# Richard Brooksby, Ravenbrook Limited, 2006-05-14
# $Id$

echo "$0: Checking for Jam/MR..."
if test -f bin/jam -a -x bin/jam; then :; else
  echo "$0: Building Jam/MR..."
  test -d bin || mkdir bin
  # There's no reason to fully bootstrap Jam, and in any case this would
  # require Yacc, which we don't want to assume is available.
  (cd tool/jam && make ./jam0) && ln tool/jam/jam0 bin/jam
fi

echo "$0: Generating Makefile..."
cat > Makefile <<EOF
# Makefile -- Stub Makefile which invokes Jam/MR to do the actual work.
# Generated by $Id$

all: .phony
	@bin/jam

clean: .phony
	@bin/jam clean

install: .phony
	@bin/jam install

uninstall: .phony
	@bin/jam uninstall

.phony:
EOF
